version: 2
deployment:
  name: Deploy into environments
  source-plan: WCAB-CAR
  description: Deploy artifacts
variables:
  GROUP_ID: "com.wso2.reference"
  ARTIFACT_ID: "HostReferenceProject"
release-naming:
  next-version-name: release-1
  applies-to-branches: false
  auto-increment: true
  auto-increment-variables: []
environments:
- DEV
- ACC
DEV:
  triggers: &id001 []
  tasks:
  - clean
  # - artifact-download:
  #     artifacts:
  #     - name: CApp
  #     description: Download release contents
  - script:
      interpreter: SHELL
      scripts:
      - wget --user=admin --password=admin@123 http://http://localhost:8081/service/local/artifact/maven/redirect?g=${bamboo.GROUP_ID}&a=${bamboo.ARTIFACT_ID}&v=LATEST
      description: Download artifcats from nexus
  - script:
      interpreter: SHELL
      scripts:
      - echo "deploying to dev"
      description: deploy to dev
  final-tasks: []
  variables: {}
  requirements: []
  notifications: []
ACC:
  triggers: *id001
  tasks:
  - clean
  # - artifact-download:
  #     artifacts:
  #     - {}
  #     description: Download release contents
  - script:
      interpreter: SHELL
      scripts:
      - echo "deploying to acc"
  final-tasks: []
  variables: {}
  requirements: []
  notifications: []